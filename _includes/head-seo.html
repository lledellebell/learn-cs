{% comment %} SEO Meta Tags {% endcomment %}
<meta name="description" content="{{ page.description | default: site.description | escape }}">
<meta name="keywords" content="{{ page.keywords | default: page.tags | join: ', ' | default: 'computer science, programming, web development, algorithms, databases' | escape }}">
<meta name="author" content="{{ page.author | default: site.author | default: 'Learn CS' | escape }}">

<meta property="og:title" content="{{ page.title | default: site.title | escape }}">
<meta property="og:description" content="{{ page.description | default: site.description | escape }}">
<meta property="og:url" content="{{ page.url | absolute_url }}">
<meta property="og:site_name" content="{{ site.title | escape }}">
<meta property="og:type" content="{% if page.layout == 'page' or page.layout == 'news' %}article{% else %}website{% endif %}">
<meta property="og:locale" content="ko_KR">
{% if page.image %}
<meta property="og:image" content="{{ page.image | absolute_url }}">
{% elsif site.logo %}
<meta property="og:image" content="{{ site.logo | absolute_url }}">
{% endif %}
{% if page.date %}
<meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}">
{% endif %}
{% if page.last_modified_at %}
<meta property="article:modified_time" content="{{ page.last_modified_at | date_to_xmlschema }}">
{% endif %}
{% if page.categories %}
  {% for category in page.categories %}
<meta property="article:section" content="{{ category }}">
  {% endfor %}
{% endif %}
{% if page.tags %}
  {% for tag in page.tags %}
<meta property="article:tag" content="{{ tag }}">
  {% endfor %}
{% endif %}

{% comment %} Twitter Card Meta Tags {% endcomment %}
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ page.title | default: site.title | escape }}">
<meta name="twitter:description" content="{{ page.description | default: site.description | escape }}">
{% if page.image %}
<meta name="twitter:image" content="{{ page.image | absolute_url }}">
{% elsif site.logo %}
<meta name="twitter:image" content="{{ site.logo | absolute_url }}">
{% endif %}

{% comment %} Canonical URL {% endcomment %}
<link rel="canonical" href="{{ page.url | absolute_url }}">

{% comment %} Structured Data (JSON-LD) {% endcomment %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "@id": "{{ site.url }}{{ site.baseurl }}/#website",
      "url": "{{ site.url }}{{ site.baseurl }}/",
      "name": "{{ site.title | escape }}",
      "description": "{{ site.description | escape }}",
      "inLanguage": "ko-KR"{% if site.logo %},
      "image": "{{ site.logo | absolute_url }}"{% endif %}
    }{% if page.layout == 'page' or page.layout == 'news' %},
    {
      "@type": "Article",
      "@id": "{{ page.url | absolute_url }}#article",
      "url": "{{ page.url | absolute_url }}",
      "headline": "{{ page.title | escape }}",
      "description": "{{ page.description | default: site.description | escape }}",
      "inLanguage": "ko-KR",
      "isPartOf": {
        "@id": "{{ site.url }}{{ site.baseurl }}/#website"
      },{% if page.date %}
      "datePublished": "{{ page.date | date_to_xmlschema }}",{% endif %}{% if page.last_modified_at %}
      "dateModified": "{{ page.last_modified_at | date_to_xmlschema }}",{% endif %}
      "author": {
        "@type": "Person",
        "name": "{{ page.author | default: site.author | default: 'Learn CS' | escape }}"
      },{% if page.image %}
      "image": "{{ page.image | absolute_url }}",{% elsif site.logo %}
      "image": "{{ site.logo | absolute_url }}",{% endif %}
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "{{ page.url | absolute_url }}"
      }{% if page.categories %},
      "articleSection": {{ page.categories | jsonify }}{% endif %}{% if page.tags %},
      "keywords": {{ page.tags | jsonify }}{% endif %}
    }{% endif %}{% if page.layout == 'page' %},
    {
      "@type": "BreadcrumbList",
      "@id": "{{ page.url | absolute_url }}#breadcrumb",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "í™ˆ",
          "item": "{{ site.url }}{{ site.baseurl }}/"
        }{% assign url_parts = page.url | split: '/' %}{% assign url_path = '' %}{% assign position = 2 %}{% for part in url_parts %}{% if part != '' and forloop.last == false %}{% assign url_path = url_path | append: '/' | append: part %},
        {
          "@type": "ListItem",
          "position": {{ position }},
          "name": "{{ part | replace: '-', ' ' | capitalize }}",
          "item": "{{ site.url }}{{ site.baseurl }}{{ url_path }}"
        }{% assign position = position | plus: 1 %}{% endif %}{% endfor %},
        {
          "@type": "ListItem",
          "position": {{ position }},
          "name": "{{ page.title | escape }}",
          "item": "{{ page.url | absolute_url }}"
        }
      ]
    }{% endif %}
  ]
}
</script>
