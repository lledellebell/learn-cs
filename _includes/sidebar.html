<aside class="sidebar">
  <!-- Table of Contents (Mobile) -->
  <div class="sidebar-section sidebar-toc-mobile">
    <h3 class="sidebar-title">
      <i class="fas fa-list"></i>
      목차
    </h3>
    <div id="mobileTocContent"></div>
  </div>

  <!-- Quick Navigation -->
  <div class="sidebar-section">
    <h3 class="sidebar-title">
      <i class="fas fa-compass"></i>
      빠른 탐색
    </h3>
    <nav class="sidebar-nav">
      {% assign current_path = page.path | split: '/' %}
      {% assign current_category = current_path[0] %}

      {% if current_category == 'algorithms' %}
        {% include sidebars/algorithms-nav.html %}
      {% elsif current_category == 'languages' %}
        {% include sidebars/languages-nav.html %}
      {% elsif current_category == 'web-development' %}
        {% include sidebars/web-development-nav.html %}
      {% elsif current_category == 'databases' %}
        {% include sidebars/databases-nav.html %}
      {% elsif current_category == 'networking' %}
        {% include sidebars/networking-nav.html %}
      {% else %}
        {% include sidebars/default-nav.html %}
      {% endif %}
    </nav>
  </div>

  <!-- Related Articles -->
  {% if page.tags %}
    <div class="sidebar-section">
      <h3 class="sidebar-title">
        <i class="fas fa-link"></i>
        관련 문서
      </h3>
      <ul class="related-list">
        {% assign related_count = 0 %}
        {% for p in site.pages %}
          {% if p.tags and p.url != page.url %}
            {% for tag in p.tags %}
              {% if page.tags contains tag and related_count < 5 %}
                <li class="related-item">
                  <a href="{{ p.url | relative_url }}">{{ p.title | default: p.name }}</a>
                </li>
                {% assign related_count = related_count | plus: 1 %}
              {% endif %}
            {% endfor %}
          {% endif %}
        {% endfor %}
      </ul>
    </div>
  {% endif %}

  <!-- Back to Top -->
  <div class="sidebar-section">
    <button class="btn-back-top" id="backToTop">
      <i class="fas fa-arrow-up"></i>
      맨 위로
    </button>
  </div>
</aside>
